:root { color-scheme: dark; }
* { box-sizing: border-box; }

body {
  margin: 0;
  background: #0b0b0b;          /* último valor declarado */
  color: #eaeaea;            /* se mantiene del primer bloque */
  font-family: system-ui, Arial, sans-serif;
}

.grid { display: grid; grid-template-columns: 420px 1fr; gap: 16px; height: 100vh; }
aside { padding: 14px; overflow: auto; border-right: 1px solid #222; }
main { position: relative; }

h3 { margin: 10px 0 8px; font-size: 16px; }
h4 { margin: 8px 0 6px; font-size: 13px; opacity: .9; }
label { display: block; margin: 8px 0 4px; font-size: 12px; opacity: .9; }

input[type="range"], input[type="file"], input[type="color"], select { width: 100%; }

.row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
  margin: 8px 0;            /* añadido del segundo bloque de .row */
}

.grp { margin: 10px 0 16px; padding: 10px; border: 1px solid #222; border-radius: 10px; background: #111; }

button {
  margin-top: 8px;
  padding: 8px 10px;
  border: none;
  border-radius: 8px;
  background: #1f6feb;
  color: #fff;
  cursor: pointer;
}
button.secondary { background: #444; }

.pre { background: #111; border: 1px solid #222; border-radius: 10px; padding: 8px; }

.preview {
  background: #0f0f0f;
  border: 1px solid #222;
  min-height: 180px;
  max-height: 280px;
  border-radius: 8px;
  position: relative;
  overflow: hidden;
}
.preview svg { width: 100%; height: 100%; display: block; }

#canvas3d { width: 100%; height: 100%; display: block; }

#bar {
  position: absolute; top: 10px; right: 10px; z-index: 10;
  background: rgba(0,0,0,.5); padding: 8px 10px; border-radius: 10px;
}

#loader {
  position: fixed; inset: 0; display: none;
  align-items: center; justify-content: center;
  background: rgba(0,0,0,.45); z-index: 9999;
  font: 14px/1 system-ui, Arial, sans-serif; color: #fff;
}
.loader {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(0,0,0,.6); padding: 10px 14px; border-radius: 10px;
}
.loader-dot { width: 10px; height: 10px; border-radius: 50%; background: #1f6feb; animation: b .8s infinite alternate; opacity: .85; }
.loader-dot:nth-child(2) { animation-delay: .1s; }
.loader-dot:nth-child(3) { animation-delay: .2s; }
@keyframes b { from { transform: scale(1); opacity: .6; } to { transform: scale(1.6); opacity: 1; } }

.mask canvas { width: 100%; height: auto; max-height: 420px; object-fit: contain; }

/* index_previo */
.prev-grid { grid-template-columns: 1fr; }
main.prev { grid-column: 1 / -1; width: 100%; max-width: 1200px; margin: 100px auto; }
.step { display: none; opacity: 0; transform: translateY(8px); transition: opacity .25s ease, transform .25s ease; }
.step.active { display: block; opacity: 1; transform: translateY(0); }
.wizard-nav { display: flex; gap: 10px; justify-content: flex-end; margin-top: 12px; }
.wizard-nav .secondary { opacity: .9; }

/* Que las previsualizaciones aprovechen alto */
.previewBox { min-height: min(70vh, 620px); }
.previewBox canvas, .previewBox img { max-height: 65vh; }

.mini { font-size: 12px; opacity: .85; }
.chip { padding: 4px 8px; border: 1px solid #333; border-radius: 8px; }
.row2 { display: flex; gap: 8px; align-items: center; }
.spacer { flex: 1; }
.hint { font-size: 12px; opacity: .8; }

#wrap { position: relative; width: 100vw; height: 100vh; overflow: hidden; }
#video { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); }
#three { position: absolute; inset: 0; pointer-events: none; }

#ui {
  position: absolute; top: 10px; left: 10px; z-index: 10;
  background: rgba(0,0,0,.55); backdrop-filter: blur(6px);
  padding: 12px 14px; border-radius: 12px; color: #fff; width: min(360px, 92vw);
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}
#ui h3 { margin: 0 0 8px; font-size: 16px; font-weight: 600; }

.row input[type="range"] { width: 100%; }
.row small { opacity: .85; }
.muted { opacity: .8; font-size: 12px; }

#glbInput { width: 100%; margin-top: 6px; }
#buttons { display: flex; gap: 8px; margin-top: 8px; }
